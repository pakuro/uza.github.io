<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Block Blast 8x8</title>
<style>
body { font-family: sans-serif; text-align: center; background:#111; color:white;}
#board { display:grid; grid-template-columns: repeat(8,40px); gap:2px; margin:20px auto;}
.cell { width:40px; height:40px; background:#333; }
.filled { background:#4caf50; }
button { margin:5px; padding:10px; }
</style>
</head>
<body>

<h1>Block Blast 8×8</h1>
<button onclick="mode='player'">プレイヤーモード</button>
<button onclick="mode='ai'">AIモード</button>

<div id="board"></div>

<script>
const size = 8;
let board = [];
let mode = "player";

function init(){
    board = Array(size).fill().map(()=>Array(size).fill(0));
    draw();
}
function draw(){
    const boardDiv = document.getElementById("board");
    boardDiv.innerHTML="";
    for(let y=0;y<size;y++){
        for(let x=0;x<size;x++){
            const cell=document.createElement("div");
            cell.className="cell"+(board[y][x]?" filled":"");
            cell.onclick=()=>placeBlock(y,x);
            boardDiv.appendChild(cell);
        }
    }
}

function placeBlock(y,x){
    if(board[y][x]==0){
        board[y][x]=1;
        clearLines();
        draw();
    }
}

function clearLines(){
    for(let i=0;i<size;i++){
        if(board[i].every(v=>v==1)){
            board[i].fill(0);
        }
        if(board.map(r=>r[i]).every(v=>v==1)){
            for(let j=0;j<size;j++) board[j][i]=0;
        }
    }
}

function aiMove(){
    for(let y=0;y<size;y++){
        for(let x=0;x<size;x++){
            if(board[y][x]==0){
                board[y][x]=1;
                clearLines();
                draw();
                return;
            }
        }
    }
}

setInterval(()=>{
    if(mode==="ai") aiMove();
},500);

init();
</script>
</body>
</html>
